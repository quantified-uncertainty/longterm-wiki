date: 2026-02-18
branch: track-github-issue-work-2nyLT
title: Add GitHub issue tracking for Claude Code sessions
model: sonnet-4
duration: ~45min
pages: []
summary: "Added a `crux issues` CLI domain and supporting rules/commands to track when Claude Code starts and finishes work on GitHub issues. Sessions now post start/completion comments and add/remove a `claude-working` label. The `/next-issue` slash command picks up the highest-priority open issue automatically. Review pass fixed: crux.mjs showHelp corruption, githubApi 204 No Content handling for DELETE, maintain.md integration of `crux issues`, and 18 new tests covering ranking, validation, and edge cases."
issues:
  - sed replacement for crux.mjs simultaneously corrupted showHelp template and JSDoc comment — fixed with line-specific sed
  - githubApi always called resp.json() which throws on GitHub DELETE 204 No Content — fixed with status check
  - rebase onto force-pushed remote branch dropped review-fixes commit — had to re-apply all changes
learnings:
  - "`crux issues start <N>` / `crux issues done <N>` are the canonical way to signal activity"
  - The `claude-working` label is auto-created if it doesn't exist
  - Priority is inferred from labels (P0/P1/P2/P3 or priority:high/medium/low) with age as tiebreaker
  - GitHub DELETE /labels/{name} returns 204 No Content — githubApi now handles this; only catch 404 in callers
