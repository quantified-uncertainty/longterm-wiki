date: "2026-02-21"
branch: claude/fix-citation-content-pk-7dSKd
title: "Fix citation_content PK — drop pageId/footnote columns"
pages: []
pr: https://github.com/quantified-uncertainty/longterm-wiki/pull/476
model: claude-opus-4-6
duration: ~20min
cost: ~$3
checks:
  initialized: true
  type: bugfix
  initiated_at: "2026-02-21T08:29:55.337Z"
  total: 30
  completed: 24
  na: 2
  skipped: 4
  items:
    - read-issue
    - explore-code
    - plan-approach
    - root-cause
    - tests-written
    - no-hardcoded
    - fix-escaping
    - fix-minimal
    - regression-test
    - correctness
    - paranoid-review
    - shell-injection
    - security
    - no-dead-code
    - no-dry-violations
    - no-regressions
    - tooling-gaps-found
    - self-audit-commands
    - self-audit-files
    - self-audit-no-fabrication
    - gate-passes
    - pr-description
    - issue-tracking
    - tooling-gaps-actioned
issues:
  - number: 454
    title: "Fix citation_content PK design — URL-only key overwrites page context"
    action: fixed
key_decisions:
  - decision: "Used Option 2 (drop columns) — treat citation_content as pure URL cache"
    rationale: "citation_quotes already tracks the page/footnote relationship"
  - decision: "SQLite knowledge-db not in scope"
    rationale: "Separate system from the Postgres wiki-server; issue #454 scopes to apps/wiki-server"
