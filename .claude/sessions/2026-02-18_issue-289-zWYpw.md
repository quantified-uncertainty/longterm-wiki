## 2026-02-18 | claude/issue-289-zWYpw | Add vitest unit tests to discord-bot

**What was done:** Added vitest unit tests for pure functions in the discord-bot app: `calculateCost()`, `formatCost()` (in logger.test.ts), and `buildPrompt()` (in query.test.ts). Also exported `buildPrompt` for testability, added vitest as a dev dependency with a `test` script in the bot's package.json, created a vitest.config.ts, and wired the bot's tests into the root `pnpm test` command.

**Pages:** (none â€” infrastructure-only change)

**Model:** sonnet-4

**Duration:** ~20min

**Issues encountered:**
- One test had an arithmetic error in the expected cost calculation (off by 1000x in the comment); corrected the expected value.

**Learnings/notes:**
- The discord-bot's `buildPrompt` function was not exported; exporting it enables unit testing without changing behavior.
