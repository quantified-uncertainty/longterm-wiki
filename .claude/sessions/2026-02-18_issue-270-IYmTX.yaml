date: 2026-02-18
branch: claude/issue-270-IYmTX
title: Fix research JSON resilience + YAML date coercion
model: sonnet-4
duration: ~30min
pages: []
summary: Improved research phase JSON parsing to recover partial data from truncated LLM responses using a multi-strategy approach (complete parse → partial array extraction → string field regex → fallback). Created a shared `loadYaml<T>()` utility using `js-yaml` `JSON_SCHEMA` option to prevent bare date strings being coerced into Date objects, then applied it across all `yaml.load()` call sites in the app.
issues:
  - JSON5/json-repair libraries not installed; implemented partial recovery without new dependencies using bracket-depth tracking.
learnings:
  - "`js-yaml` default schema auto-coerces `2026-02-18` to `Date` objects; `JSON_SCHEMA` option prevents this. All server-component YAML loading should use `loadYaml()` from `@lib/yaml`."
  - Truncated LLM JSON responses occur when the response hits the token limit mid-array; partial extraction of complete objects is feasible with bracket matching.
