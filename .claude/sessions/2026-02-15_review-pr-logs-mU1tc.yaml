date: 2026-02-15
branch: claude/review-pr-logs-mU1tc
title: Review last 20 PR logs and fix synthesis deadlock
pages: []
summary: "Reviewed session logs and GitHub PR metadata for the last 20 merged PRs (Feb 13â€“15). Identified the #1 recurring issue: crux synthesis subprocess hangs due to a Node.js pipe buffer deadlock (stderr never drained). Fixed the root cause in all 3 affected files (synthesis.ts, validation.ts, deployment.ts) by adding stderr drains, timeouts (5min/3min), and error handlers. Filed 4 GitHub issues for remaining items: #146 (synthesis deadlock documentation), #147 (entity ID partial matching), #148 (linter ID reassignment check), #149 (cross-page canonical data)."
pr: 156
issues:
  - Pre-existing TS errors in crux/validate/ (unrelated module resolution issues)
  - deployment.ts return type didn't include `error` field despite already returning it in the error handler
learnings:
  - "The synthesis deadlock is a classic Node.js pattern: `stdio: ['pipe', 'pipe', 'pipe']` with unconsumed stderr fills the OS pipe buffer (~64KB), blocking the subprocess"
  - All 3 subprocess spawns (synthesis, validation, review) had the same bug
  - deployment.ts was slightly more resilient (had an error handler) but still lacked stderr drain and timeout
