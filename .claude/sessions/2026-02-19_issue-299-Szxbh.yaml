date: 2026-02-19
branch: claude/issue-299-Szxbh
title: Migrate session logs from Markdown to YAML
model: sonnet-4
duration: ~45min
pages: []
summary: >
  Migrated all 125 session log files from fragile regex-parsed Markdown to structured YAML.
  Added parseYamlSessionLog() to the parser, wrote a Zod schema for the new format, rewrote
  validate-session-logs.ts to use schema validation, created a migration script, ran it to
  convert all existing files, and updated all doc references.
issues:
  - None
learnings:
  - The yaml@2 package is already available in both app and crux — no new dependencies needed
  - The migration script's extractField() helper needs a greedy-not regex to handle fields
    that don't have trailing markers — the body-slice approach works better here
  - YAML block scalars (>) automatically fold multi-line text to a single line with a trailing newline
recommendations:
  - The KNOWN_MODELS list in validate-session-logs.ts will need updating as new Claude models are released
