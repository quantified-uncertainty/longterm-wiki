date: 2026-02-20
branch: claude/footnotes-internal-links-EWaNs
title: "Add <References> bibliography component (proof-of-concept for #381)"
pages:
  - why-alignment-hard
  - alignment
pr: https://github.com/quantified-uncertainty/longterm-wiki/pull/396
model: claude-sonnet-4-6
duration: ~45min
cost: ~$0.50
summary: >
  Added a <References ids={[...]} /> MDX component that renders a numbered
  bibliography section from R-component resource IDs. This is a proof-of-concept
  toward resolving issue #381 (citation system unification): pages can now have
  both inline <R> tooltips (data-layer connected) and a traditional numbered
  reference list at the bottom, making migration from [^N] footnotes incremental.
  Applied to 2 pilot pages. Fixed semantic HTML issue (ol→ul) found during
  paranoid review. Filed issue #395 for a URL-footnote linter rule.
issues:
  - Paranoid review flagged <ol> with list-none + manual numbering as contradictory — fixed to <ul role="list">
learnings:
  - TOC extraction reads raw markdown ## syntax, not rendered JSX h2 — so <h2> in components doesn't pollute the TOC
  - The two citation systems serve different roles: <R> is inline+tooltip, [^N] is end-of-sentence+footnote — they can coexist productively
  - resource IDs in <References> must be extracted manually from page content for now; automation would reduce error risk
checks:
  initialized: true
  type: content
  initiated_at: "2026-02-20T16:56:05.249Z"
  total: 33
  completed: 29
  na: 4
  skipped: 0
  items:
    - read-issue
    - explore-code
    - plan-approach
    - no-hardcoded
    - fix-escaping
    - correctness
    - shell-injection
    - security
    - no-dead-code
    - no-dry-violations
    - full-integration
    - no-regressions
    - entitylinks-resolve
    - numeric-ids-stable
    - mdx-escaping
    - content-accuracy
    - citations-have-urls
    - tooling-gaps-found
    - self-audit-commands
    - self-audit-files
    - self-audit-no-fabrication
    - gate-passes
    - pr-description
    - issue-tracking
    - session-log
    - push-ci-green
    - no-merge-conflicts
    - check-recent-merges
    - tooling-gaps-actioned
