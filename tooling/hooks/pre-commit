#!/bin/sh
# Pre-commit hook for longterm-wiki
# Runs validation before allowing commits

GIT_ROOT="$(git rev-parse --show-toplevel)"

echo "üîç Running precommit validation..."
cd "$GIT_ROOT" && node tooling/crux.mjs validate --quick

if [ $? -ne 0 ]; then
  echo ""
  echo "‚ùå Precommit validation failed. Fix the issues above before committing."
  echo "   To skip (not recommended): git commit --no-verify"
  exit 1
fi

echo "‚úÖ Precommit validation passed"
