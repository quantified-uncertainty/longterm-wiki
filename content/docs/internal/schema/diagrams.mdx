---
title: "Schema Diagrams"
description: "Visual documentation of entity types, relationships, data flow, and the full entity-relationship model"
sidebar:
  order: 2
---

import {Mermaid} from '@components/wiki';

Visual reference for how the data schema fits together. All diagrams are derived from `data/schema.ts`.

---

## Entity-Relationship Overview

This ER diagram shows the core data types and how they reference each other. Primary keys are marked; foreign key references show how entities cross-link.

<Mermaid chart={`
erDiagram
    Entity ||--o{ RelatedEntry : "relatedEntries"
    Entity ||--o{ EntitySource : "sources"
    Entity ||--o{ ContentSection : "content.sections"
    Entity ||--o| EntityContent : "content"
    Entity ||--o| ParameterDistinctions : "parameterDistinctions"
    Entity }o--o{ Resource : "resources (by ID)"
    Entity }o--o| CauseEffectGraph : "embedded graph"

    Expert ||--o{ ExpertPosition : "positions"
    Expert }o--o| Organization : "affiliation"
    Organization ||--o{ Expert : "keyPeople"

    Estimate ||--o{ EstimateSource : "estimates"
    Crux ||--o{ CruxPosition : "positions"

    Graph ||--o{ GraphNode : "nodes"
    Graph ||--o{ GraphEdge : "edges"

    MasterGraph ||--o{ MasterGraphNode : "nodes"
    MasterGraph ||--o{ MasterGraphEdge : "edges"
    MasterGraph ||--o{ SubgraphSpec : "subgraphs"

    CauseEffectGraph ||--o{ CauseEffectNode : "nodes"
    CauseEffectGraph ||--o{ CauseEffectEdge : "edges"

    FactsFile ||--o{ Fact : "facts"

    Entity {
        string id PK
        EntityType type
        string title
        string description
        string status
        string numericId UK
    }

    RelatedEntry {
        string id FK
        EntityType type
        RelationshipType relationship
        string strength
    }

    Expert {
        string id PK
        string name
        string affiliation FK
        string role
    }

    Organization {
        string id PK
        string name
        OrgType type
        string founded
    }

    Resource {
        string id PK
        string url
        string title
        ResourceType type
        number importance
    }

    Fact {
        string entity FK
        string factId PK
        string value
        number numeric
        string compute
    }
`} />

---

## Entity Base Fields (Class Diagram)

Every entity shares these fields. Type-specific fields (like `severity` for risks or `orgType` for organizations) are layered on top.

<Mermaid chart={`
classDiagram
    class Entity {
        +String id
        +EntityType type
        +String title
        String description
        String[] aliases
        EntityContent content
        EntityStatus status
        String lastUpdated
        String[] tags
        Cluster[] clusters
        String severity
        Likelihood likelihood
        Timeframe timeframe
        ResearchMaturity maturity
        String website
        CustomField[] customFields
        String[] relatedTopics
        RelatedEntry[] relatedEntries
        EntitySource[] sources
        String[] resources
        ParameterDistinctions parameterDistinctions
    }

    class EntityContent {
        String intro
        ContentSection[] sections
        String footer
    }

    class ContentSection {
        +String heading
        String body
        String mermaid
        ContentTable table
        String component
        Record componentProps
    }

    class RelatedEntry {
        +String id
        +EntityType type
        RelationshipType relationship
        String strength
    }

    class CustomField {
        +String label
        +String value
    }

    class EntitySource {
        +String title
        String url
        String author
        String date
    }

    Entity *-- EntityContent
    Entity *-- RelatedEntry
    Entity *-- CustomField
    Entity *-- EntitySource
    EntityContent *-- ContentSection
`} />

---

## Standalone Data Types

These types have their own YAML files and are separate from the entity system.

<Mermaid chart={`
classDiagram
    class Expert {
        +String id
        +String name
        String affiliation
        String role
        String website
        String twitter
        String[] knownFor
        String background
        ExpertPosition[] positions
    }

    class ExpertPosition {
        +String topic
        +String view
        String estimate
        Confidence confidence
        String date
        String source
        String sourceUrl
    }

    class Organization {
        +String id
        +String name
        +OrgType type
        String founded
        String headquarters
        String website
        String description
        String[] keyPeople
        String funding
        String employees
        String safetyFocus
        String parentOrg
    }

    class Estimate {
        +String id
        +String variable
        String description
        String unit
        String aggregateRange
        String category
        EstimateSource[] estimates
    }

    class EstimateSource {
        +String source
        +String value
        String date
        String url
        Confidence confidence
    }

    class Crux {
        +String id
        +String question
        String domain
        +Importance importance
        String resolvability
        CruxPosition[] positions
        String[] relatedCruxes
    }

    class Resource {
        +String id
        +String url
        +String title
        ResourceType type
        String[] authors
        String published_date
        Number importance
        String summary
        String review
        String[] key_points
        String publication_id
        String[] tags
    }

    Expert *-- ExpertPosition
    Estimate *-- EstimateSource
`} />

---

## Graph Systems

The wiki has three distinct graph systems for different purposes.

### 1. Cause-Effect Graphs (Entity-embedded)

Used on individual entity pages to show causal factors. Rendered with React Flow.

<Mermaid chart={`
classDiagram
    class CauseEffectGraph {
        String title
        String description
        String primaryNodeId
        CauseEffectNode[] nodes
        CauseEffectEdge[] edges
    }

    class CauseEffectNode {
        +String id
        +String label
        String description
        NodeType type
        Number confidence
        String details
        String entityRef
        NodeScores scores
        String color
    }

    class CauseEffectEdge {
        String id
        +String source
        +String target
        Strength strength
        Confidence confidence
        Effect effect
        String label
    }

    class NodeScores {
        Number novelty
        Number sensitivity
        Number changeability
        Number certainty
    }

    CauseEffectGraph *-- CauseEffectNode
    CauseEffectGraph *-- CauseEffectEdge
    CauseEffectNode *-- NodeScores

    note for CauseEffectNode "type: leaf | cause | intermediate | effect"
    note for CauseEffectEdge "effect: increases | decreases | mixed"
`} />

### 2. Risk Dependency Graphs (Standalone)

Used for modeling risk dependencies across the system.

<Mermaid chart={`
classDiagram
    class Graph {
        +String id
        +String title
        String description
        GraphNode[] nodes
        GraphEdge[] edges
    }

    class GraphNode {
        +String id
        +String label
        +Category category
        String description
        String entityRef
    }

    class GraphEdge {
        +String from
        +String to
        +EdgeType type
        String label
        Importance strength
    }

    Graph *-- GraphNode
    Graph *-- GraphEdge

    note for GraphNode "category: crux | risk | outcome | capability | intervention"
    note for GraphEdge "type: causes | mitigates | requires | enables | blocks"
`} />

### 3. Master Graph (Unified causal model)

A single large graph that entity pages extract subgraphs from. Supports multi-page views with per-entity highlighting.

<Mermaid chart={`
classDiagram
    class MasterGraph {
        +String id
        +String title
        String version
        MasterGraphNode[] nodes
        MasterGraphEdge[] edges
        SubgraphSpec[] subgraphs
        Group[] groups
    }

    class MasterGraphNode {
        +String id
        +String label
        +NodeType type
        String ownerEntityId
        String entityRef
        String group
        Number confidence
    }

    class SubgraphSpec {
        +String entityId
        +String centerNode
        Number depth
        String[] includeNodes
        String[] excludeNodes
    }

    MasterGraph *-- MasterGraphNode
    MasterGraph *-- SubgraphSpec
`} />

---

## Relationship Types Map

All 45 relationship types, grouped by semantic category. Arrows show directionality (A → B means "A [relationship] B").

<Mermaid chart={`
flowchart TB
    subgraph Causal["Causal / Influence"]
        direction LR
        causes["causes<br/><i>A causes B</i>"]
        drives["drives / driven-by"]
        affects["affects"]
        amplifies["amplifies"]
        leads_to["leads-to"]
        contributes_to["contributes-to"]
        shaped_by["shaped-by"]
    end

    subgraph Mitigation["Mitigation / Prevention"]
        direction LR
        mitigates["mitigates / mitigated-by"]
        mitigation["mitigation"]
        blocks["blocks"]
        addresses["addresses"]
    end

    subgraph Dependency["Dependency / Structure"]
        direction LR
        requires["requires"]
        enables["enables"]
        prerequisite["prerequisite"]
        child_of["child-of"]
        composed_of["composed-of"]
        component["component"]
        supersedes["supersedes"]
    end

    subgraph Measurement["Measurement / Analysis"]
        direction LR
        measures["measures / measured-by"]
        analyzes["analyzes / analyzed-by"]
        models_r["models"]
        increases["increases"]
        decreases["decreases"]
        supports["supports"]
    end

    subgraph Classification["Classification / Taxonomy"]
        direction LR
        related["related"]
        example["example"]
        mechanism["mechanism"]
        outcome["outcome"]
        consequence["consequence"]
        manifestation["manifestation"]
        key_factor["key-factor"]
        scenario_r["scenario / sub-scenario"]
        research["research"]
        vulnerable["vulnerable-technique"]
    end
`} />

---

## Enum Reference

### EntityType (24 canonical + 11 aliases)

<Mermaid chart={`
flowchart TD
    subgraph Canonical["Canonical Types (24)"]
        direction TB
        subgraph Content["Content"]
            risk & risk_factor["risk-factor"] & capability & concept & crux & argument & case_study["case-study"]
        end
        subgraph Safety["Safety"]
            safety_agenda["safety-agenda"] & approach & project & policy
        end
        subgraph PeopleOrg["People and Organizations"]
            person & organization & funder
        end
        subgraph AnalysisG["Analysis"]
            model & parameter & metric & analysis & scenario
        end
        subgraph ATM["AI Transition Model"]
            atm_param["...-parameter"] & atm_metric["...-metric"] & atm_scenario["...-scenario"] & atm_factor["...-factor"] & atm_subitem["...-subitem"]
        end
        subgraph OtherG["Other"]
            resource & historical & event & debate & table_t["table"] & diagram & insight & intel_paradigm["intelligence-paradigm"]
        end
    end

    subgraph Aliases["Legacy Aliases (11)"]
        direction TB
        researcher["researcher → person"]
        lab["lab → organization"]
        lab_f["lab-frontier → organization"]
        lab_r["lab-research → organization"]
        lab_s["lab-startup → organization"]
        lab_a["lab-academic → organization"]
        sa["safety-approaches → safety-agenda"]
        pol["policies → policy"]
        con["concepts → concept"]
        ev["events → event"]
        mod["models → model"]
    end
`} />

### Key Enum Values

| Enum | Values |
|------|--------|
| **Confidence** | `low`, `medium`, `high` |
| **Importance** | `low`, `medium`, `high`, `critical` |
| **EntityStatus** | `stub`, `draft`, `published`, `verified` |
| **ResearchMaturity** | `Neglected`, `Emerging`, `Growing`, `Mature` |
| **OrgType** | `frontier-lab`, `safety-org`, `academic`, `government`, `funder`, `policy` |
| **RiskCategory** | `accident`, `misuse`, `structural`, `epistemic` |
| **Severity** | `low`, `medium`, `medium-high`, `high`, `critical`, `catastrophic` |
| **LikelihoodLevel** | `low`, `medium`, `medium-high`, `high`, `very-high`, `near-certain` |
| **LikelihoodStatus** | `theoretical`, `emerging`, `occurring`, `established` |
| **ResourceType** | `paper`, `blog`, `report`, `book`, `talk`, `podcast`, `government`, `reference`, `web` |
| **PublicationType** | `academic_journal`, `preprint_server`, `think_tank`, `company_blog`, `government`, `blog_platform`, `news`, `organization`, `academic`, `code_repository`, + more |
| **Cluster** | `ai-safety`, `biorisks`, `cyber`, `epistemics`, `governance`, `community` |
| **Relationship Strength** | `weak`, `moderate`, `strong` |
| **CauseEffect Strength** | `weak`, `medium`, `strong` |
| **CauseEffect Effect** | `increases`, `decreases`, `mixed` |

---

## Data Flow: Build Pipeline

Detailed view of how raw YAML is transformed into the runtime database.

<Mermaid chart={`
flowchart TD
    subgraph Input["Source Files"]
        YAML["entities/*.yaml<br/>resources/*.yaml<br/>facts/*.yaml"]
        MDX["content/docs/**/*.mdx<br/><i>~625 pages</i>"]
        StandalonYAML["experts.yaml<br/>organizations.yaml<br/>estimates.yaml<br/>cruxes.yaml<br/>glossary.yaml<br/>publications.yaml"]
    end

    subgraph BuildSteps["build-data.mjs Steps"]
        direction TB
        step1["1. Parse all YAML files"]
        step2["2. Scan MDX frontmatter"]
        step3["3. Auto-create entities<br/>from MDX without YAML"]
        step4["4. Assign numeric IDs<br/>(id-registry.json)"]
        step5["5. Type & validate entities"]
        step6["6. Compute backlinks<br/>(invert relatedEntries)"]
        step7["7. Build tag index"]
        step8["8. Build path registry"]
        step9["9. Resolve computed facts<br/>(topological sort)"]
        step10["10. Generate search index"]
        step11["11. Generate MDX from<br/>YAML ContentSections"]
    end

    subgraph Output["Generated Files"]
        DB["database.json<br/><i>entities, backlinks,<br/>tagIndex, facts, insights</i>"]
        IDReg["id-registry.json"]
        Search["search index"]
        GenMDX["generated .mdx stubs"]
    end

    Input --> step1
    MDX --> step2
    step1 --> step2
    step2 --> step3
    step3 --> step4
    step4 --> step5
    step5 --> step6
    step6 --> step7
    step7 --> step8
    step8 --> step9
    step9 --> step10
    step10 --> step11
    step11 --> Output
`} />

---

## Facts System

Facts are canonical, referenceable values that can be computed from expressions referencing other facts.

<Mermaid chart={`
classDiagram
    class FactsFile {
        +String entity
        +Record facts
    }

    class Fact {
        String value
        Number numeric
        String asOf
        String source
        String note
        Boolean noCompute
        String compute
        String format
        Number formatDivisor
    }

    FactsFile *-- Fact

    note for Fact "compute: expression referencing other facts\ne.g. {anthropic.valuation} * {rate}\nResolved via topological sort at build time"
`} />

**Example fact file** (`data/facts/anthropic.yaml`):
```yaml
entity: anthropic
facts:
  founding-year:
    value: "2021"
    numeric: 2021
    source: "Wikipedia"
  valuation:
    compute: "{anthropic.funding} * 1.5"
    format: "$%.1f billion"
    formatDivisor: 1e9
```

---

## Content Freshness Tracking

MDX frontmatter can include freshness metadata to track content staleness:

```yaml
reviewBy: "2026-06-26"           # When content should be reviewed
contentDependencies:              # Entity IDs that affect this content
  - deceptive-alignment
  - mesa-optimization
lastReviewed: "2025-12-26"
reviewedBy: "ozzie"
stalenessRisk: "low"             # low | medium | high
```

---

## Publication & Credibility System

Resources are linked to publications for credibility scoring.

<Mermaid chart={`
classDiagram
    class Publication {
        +String id
        +String[] domains
        +String name
        +PublicationType type
        +Number credibility
        Boolean peer_reviewed
        String description
    }

    class Resource {
        +String id
        +String url
        String publication_id
        Number credibility_override
    }

    Resource --> Publication : publication_id

    note for Publication "credibility: 1-5 scale\n5 = gold standard (Nature, Science)\n1 = unvetted source"
`} />

---

*Source of truth: `data/schema.ts` (834 lines)*
