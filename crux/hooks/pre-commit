#!/bin/sh
# Pre-commit hook for longterm-wiki
# Runs validation before allowing commits

GIT_ROOT="$(git rev-parse --show-toplevel)"

echo "ğŸ” Running precommit validation..."
cd "$GIT_ROOT" && node crux/crux.mjs validate --quick

if [ $? -ne 0 ]; then
  echo ""
  echo "âŒ Precommit validation failed. Fix the issues above before committing."
  echo "   To skip (not recommended): git commit --no-verify"
  exit 1
fi

echo "âœ… Precommit validation passed"
